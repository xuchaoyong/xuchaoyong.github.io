<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Unix Networking Programming Learning 1 | To Build Your Life</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="TIME_WAIT state in TCP
The duration is twice the maximum segment lifetime (MSL), sometimes called 2MSL.There are two reasons for the TIME_WAIT state:

To implement TCP’s full-duplex connection termina">
<meta property="og:type" content="article">
<meta property="og:title" content="Unix Networking Programming Learning 1">
<meta property="og:url" content="http://yoursite.com/2015/01/11/Unix-Networking-Programming-Learning-1/">
<meta property="og:site_name" content="To Build Your Life">
<meta property="og:description" content="TIME_WAIT state in TCP
The duration is twice the maximum segment lifetime (MSL), sometimes called 2MSL.There are two reasons for the TIME_WAIT state:

To implement TCP’s full-duplex connection termina">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Unix Networking Programming Learning 1">
<meta name="twitter:description" content="TIME_WAIT state in TCP
The duration is twice the maximum segment lifetime (MSL), sometimes called 2MSL.There are two reasons for the TIME_WAIT state:

To implement TCP’s full-duplex connection termina">

  
    <link rel="alternative" href="/atom.xml" title="To Build Your Life" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">To Build Your Life</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Unix-Networking-Programming-Learning-1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/01/11/Unix-Networking-Programming-Learning-1/" class="article-date">
  <time datetime="2015-01-11T15:07:43.000Z" itemprop="datePublished">Jan 11 2015</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Unix Networking Programming Learning 1
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="TIME_WAIT_state_in_TCP">TIME_WAIT state in TCP</h4>
<p>The duration is twice the maximum segment lifetime (MSL), sometimes called 2MSL.<br>There are two reasons for the TIME_WAIT state:</p>
<ol>
<li><p>To implement TCP’s full-duplex connection termination reliably<br>Assuming taht the final ACK from the client is lost, and then, the server will resend its final FIN. However, if it does not maintain this information, it would respond with an RST, which would be interpreted by the server as an error.</p>
</li>
<li><p>To allow old duplicate segments to expire in the network<br>TCP must prevent old duplicates from a connection from reappearing at some later<br>time and being misinterpreted as belonging to a new incarnation of the same connection. To do this , TCP will not initiate a new incarnation of a connection that is currently in the TIME_WAIT state. By enforcing this rule, we are guaranteed that when we successfully establish a TCP connection, <strong>all old duplicates from previous incarnations of the connection have expired</strong> in the network.</p>
</li>
</ol>
<h4 id="2-_TCP_Output">2. TCP Output</h4>
<p>When an application calls write, the kernel copies all the data from the application buffer into the socket send buffer. The kernel will not return from the write until the final byte in the application buffer has been copied into the socket send buffer.</p>
<p>The peer TCP must acknowledge the data, and as the ACKs arrive from the peer, only then can our TCP discard the acknowledge data from the socket send buffer. TCP must keep a copy of our data until it is acknowledge by the peer.</p>
<p>TCP sends the data to IP in MSS-sized or smaller chunks, prepending its TCP header to each segment. IP prepends its header, searches the routing table for the desination IP address (the matching routing table entry specifies the outgoing interface), and passes the datagram to the apropriate datalink. IP might perform fragmentation before passing the datagram to the datalink. <code>Fragmentation happens here by IP.</code></p>
<h4 id="3-_UDP_Output">3. UDP Output</h4>
<p>UDP does not really have socket send buffer since it is unreliable, which has no need to keep the send data. </p>
<p>UDP simply prepends its 8-byte header and passes the datagram to IP. If a UDP application send large datagrams, there is a much higher probability of fragmentation than with TCP, because TCP breaks the application data into MSS-sized chunks, something that has no couterpart in UDP.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/01/11/Unix-Networking-Programming-Learning-1/" data-id="ht9127wbmnq6j7n9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Unix-Networking-Programming/">Unix Networking Programming</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2015/01/11/Reading-note-2-of-THE-POWER-of-HABIT/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Reading Note 2 of THE POWER of HABIT</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Reading/">Reading</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unix-Networking-Programming/">Unix Networking Programming</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Reading/" style="font-size: NaNpx;">Reading</a><a href="/tags/Unix-Networking-Programming/" style="font-size: NaNpx;">Unix Networking Programming</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a><span class="archive-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2015/01/11/Unix-Networking-Programming-Learning-1/">Unix Networking Programming Learning 1</a>
          </li>
        
          <li>
            <a href="/2015/01/11/Reading-note-2-of-THE-POWER-of-HABIT/">Reading Note 2 of THE POWER of HABIT</a>
          </li>
        
          <li>
            <a href="/2014/11/09/first-post/">first post</a>
          </li>
        
          <li>
            <a href="/2014/11/08/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 Charlie<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">

  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>



<script src="/js/script.js" type="text/javascript"></script>


  </div>
</body>
</html>